/*! bate version - v1.0 - vA packaged deploy by 冯达庆 . -2016-06-15 */;define(["jquery","jqueryihgdialog","../utils/SysUrl","../utils/Common","../utils/ModelDailog","../utils/SysConfig","../viewmodel/UserValidateViewModel"],function(a,b,c,d,e,f,g){"use strict";var h=function(a,b){this.LoginUser=a,this.CertState=b,this.Company=$("#CompanyName"),this.Contact=$("#Contact"),this.Font=!1,this.Back=!1,this.ViewModel=new g,this.SubBtn=$(".btn-sub"),this.SysUrl=c,this.init()};return h.prototype={init:function(){this.bindEvent()},bindEvent:function(){function a(a){var b={title:"名片认证提示!",desc:a,button:{enterBtn:{visable:!0,text:"确定"}}},c=new d.CustDialog(b);c.showNoCertDialog()}function b(b){var c=e.CertState;if("Waiting"===c)return a("正在认证中，无需再次申请");if("Success"===c)return a("已通过认证，无需再次申请");var d=$("#CompanyName"),f=d.val();if(!f||f.length<1)return a("公司名称",d);d=$("#Contact").val();var g=$("#Contact").attr("placeholder");return d==e.LoginUser.UserName?a("您的推荐人不能是自己。",d):(d==g&&(e.Contact=""),0==e.Font?a("请上传名片正面图片。",d):0==e.Back?a("请上传名片反面图片。",d):!0)}var e=this;e.SubBtn.unbind("click"),e.SubBtn.click(function(){b()&&(e.ViewModel.setterBus($(e.Company).val(),e.Font,e.Back,e.LoginUser.DDUserId,$(e.Contact).val()),e.ViewModel.setBussinessCard(function(b){0==b.Data.STATE?window.location.href=c.getUrl("/Users/ValidateInfo/NavFollowSeries"):a("信息提交出错，出错原因 "+b.Data.MSG)}))})}},h});