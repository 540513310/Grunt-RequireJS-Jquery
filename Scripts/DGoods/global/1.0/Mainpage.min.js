/*! bate version - v1.0 - vA packaged deploy by 冯达庆 . -2016-06-15 */;define(["jquery","../utils/Common","../utils/SysUrl","../utils/SysConfig","../viewmodel/ModuleBase","SocketClientCtl"],function(a,b,c,d,e,f){function g(){return window.location.pathname.indexOf("DGoods")>-1}a(document).ajaxStart(function(){if(g()){var b='<div class="sys-loading" style="top: 50%; left: 50%;z-index: 101;position:absolute;background-image: url(/Content/users/images/loading.gif);background-repeat: no-repeat;height: 74px;width: 74px;"> </div>';a(b).insertAfter("body")}}).ajaxStop(function(){g()&&a(".sys-loading").fadeOut(2e3,function(){a(this).remove()})}),a(function(){if(!g())return!1;a(".global_find_list").hover(function(){a(".global_find_menu_dl").show(),a(this).addClass("bor")},function(){a(".global_find_menu_dl").hide(),a(this).removeClass("bor")}),a(".global_find_menu_dl").hover(function(){a(this).show(),a(".global_find_list").addClass("bor")},function(){a(this).hide(),a(".global_find_list").removeClass("bor")}),a(".global_header-wrapper-menu-item").find("a").each(function(b,c){-1!=a(c).attr("data-url").indexOf("DGoods")&&a(c).addClass(" active")}),b.PlaceHolder(),a(window).scroll(function(){var b=a(window).scrollTop();b>360?a("#return_top").show(200):a("#return_top").hide(200)}),a("#return_top").click(function(){return a("body,html").animate({scrollTop:0},1e3),!1}),a(".account-welcome").hover(function(){a(this).addClass("infoHover")},function(){a(this).removeClass("infoHover")}),a(".work_slide-main-close").click(function(){var b=a(this).parent().parent();b.hasClass("isclose")?b.removeClass("isclose"):b.addClass("isclose")}),a("#cartCount").length&&a.post("/Cart/GetCartCount",function(b){1==b.Code&&b.CartCount>0&&a("#cartCount").text(b.CartCount)});var c=a(".have-child-item");c.click(function(){var b=c.parent().find(".fd-hide");b&&b.length>0?(a.each(b,function(){a(this).removeClass("fd-hide"),a(this).addClass("fd-show")}),c.find("em").addClass("open"),c.find("em").removeClass("close")):(b=c.parent().find(".fd-show"),b&&b.length>0&&a.each(b,function(){a(this).removeClass("fd-show"),a(this).addClass("fd-hide")}),c.find("em").removeClass("open"),c.find("em").addClass("close"))})}),a(window).scroll(function(){var b=a(window).scrollTop();b>360?a("#return_top").show(200):a("#return_top").hide(200)});var h={init:function(){var a=c.getUrl("/DGoods/Home/GetDDUserInfo"),b=e.GetInstance();b.Url=a,b.Method=SysInfo.Ajax.getMethod,b.CallBack=function(a){new f(a.Data.Obj)},b.Ajax()},bindEvents:function(c){if(g()){var d=a("#return_top"),e=a(".memberLbMallMoney"),f=a(".memberSpMallMoney"),h=a(".memberLbOrderMoney"),i=a(".CheckInCertificate"),j=a(".CheckOutCertificate"),k=a(".favorite-offer[onclick]"),l=a(".favorite-seller[onclick]");e.click(function(){b.showMoney("A")}),f.click(function(){b.hideMoney("A")}),h.click(function(){b.showMoney("B")}),i.click(function(a){b.checkCert(a,c)}),j.click(function(a){b.checkCert(a,c)}),k.click(function(a){b.checkCert(a,c)}),l.click(function(a){b.checkCert(a,c)}),d.click(function(){b.gotoTop()})}}};return h});