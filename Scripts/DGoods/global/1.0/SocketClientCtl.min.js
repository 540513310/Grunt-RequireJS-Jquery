/*! bate version - v1.0 - vA packaged deploy by 冯达庆 . -2016-06-15 */;define(["jquery","../utils/SysUrl","../utils/ModelDailog","../utils/SysConfig","../viewmodel/SocketClient","../viewmodel/IgnoreRequireViewModel"],function(a,b,c,d,e,f){var g=function(a){var b={LoginUser:a,onUserJoin:this.onUserJoin,onUserLogout:this.onUserLogout,onRequirePunished:this.onRequirePunished,onQuotedPunished:this.onQuotedPunished,onQuotedConfirmed:this.onQuotedConfirmed};this.Socket=new e(b)};return g.prototype={onUserJoin:function(a,b){},onUserLogout:function(a,b){},onRequirePunished:function(c,d){var e=this;if(e.LoginUser.DDUserId!=d.Data.USERID&&-1!=e.LoginUser.SERIES.indexOf(d.Data.SERIES)){var g='<embed src="'+b.getUrl("Content/Users/DGoods/Sound/whistle.wav")+'"  autostart = "1" style="height:0px;width:0px;" ></embed>',h='<div class="RequireMarkUp" data-id='+d.Data.REQUIREID+"><h3>"+d.Data.MATERIAL+"/"+d.Data.SURFACE+"</h3><p>"+d.Data.DETAIL+"。 ";"undefined"!=typeof d.Data.DELIVERY&&(h+="  交货地点:"+d.Data.DELIVERY+"</p>"),h+="</div>"+g,a(document).showpopu({Title:"DD找货-最新求购",ConfirmTitle:"抢单",CloseTitle:"忽略",templateHtml:h,onClose:function(){var a=new f;a.setter(e.LoginUser.DDUserId,d.Data.REQUIREID),a.ignoreRequire(function(a){})},onConfirm:function(a){var c=window.location.pathname;"/DGoods/VieOrder/Quoted"!=c?window.open(b.getUrl("/DGoods/VieOrder/Quoted?requireId="+d.Data.REQUIREID),"_self"):window.location.href=b.getUrl("/DGoods/VieOrder/Quoted?requireId="+d.Data.REQUIREID)}})}},onQuotedPunished:function(c,d){var e=this;if(e.LoginUser.DDUserId==d.Data.USERID){var f='<div class="QuotedMarkUp" data-id='+d.Data.OFFERID+"><p>"+d.Data.DETAIL+"</p></div>";a(document).showpopu({Title:"DD找货-最新报价",ConfirmTitle:"查看",CloseTitle:"关闭",templateHtml:f,onClose:function(){},onConfirm:function(a){var c=window.location.pathname;"/DGoods/Deliver/Finding"!=c?window.open(b.getUrl("/DGoods/Deliver/Finding?requireId="+d.Data.REQUIREID),"_self"):window.location.href=b.getUrl("/DGoods/Deliver/Finding?requireId="+d.Data.REQUIREID)}})}},onQuotedConfirmed:function(c,d){var e=this;if(e.LoginUser.DDUserId==d.Data.USERID){var f='<div class="ConfirmMarkUp" data-id='+d.Data.OFFERID+"><h3>恭喜抢单成功.</h3><p>"+d.Data.DETAIL+"</p></div>";a(document).showpopu({Title:"DD找货-抢单成功",ConfirmTitle:"查看",CloseTitle:"关闭",templateHtml:f,onClose:function(){},onConfirm:function(a){var c=window.location.pathname;"/DGoods/VieOrder/ViedSuccess"!=c?window.open(b.getUrl("/DGoods/VieOrder/ViedSuccess?requireId="+d.Data.REQUIREID),"_self"):window.location.href=b.getUrl("/DGoods/VieOrder/ViedSuccess?requireId="+d.Data.REQUIREID)}})}}},g});