/*! bate version - v1.0 - vA packaged deploy by 冯达庆 . -2016-06-15 */;define(["jquery","../utils/SysUrl"],function(a,b){function c(c){var d="@isLogin";"False"==d?window.top.location.href=b.getUrl("/Account/Login?ReturnUrl="+window.top.location.href):a.post(b.getUrl("/Users/Fund/Summary"),function(d){1==d.Code?"A"==c?(a(".nav-content .memberSpMallMoney").text(d.MallMoney+" 元").addClass("fontRed"),a(".nav-content .memberSpMallMoney").css("display","inline"),a(".nav-content .memberLbMallMoney").hide()):"B"==c?(a(".nav-content .memberSpOrderMoney").text(d.OrderMoney+" 元").addClass("fontRed"),a(".nav-content .memberSpOrderMoney").css("display","inline"),a(".nav-content .memberLbOrderMoney").hide()):"C"==c?(a(".work_user-money .memberSpMallMoney").text(d.MallMoney+" 元").addClass("fontRed"),a(".work_user-money .memberSpMallMoney").css("display","inline"),a(".work_user-money .memberLbMallMoney").hide()):"D"==c&&(a(".work_user-money .memberSpOrderMoney").text(d.OrderMoney+" 元").addClass("fontRed"),a(".work_user-money .memberSpOrderMoney").css("display","inline"),a(".work_user-money .memberLbOrderMoney").hide()):0==d.Code?window.top.location.href=b.getUrl("/Account/Login?ReturnUrl="+window.top.location.href):-1!=d.indexOf("登录超时")&&(window.top.location.href=b.getUrl("/Account/Login?ReturnUrl="+window.top.location.href))})}function d(b){"A"==b?(a(".nav-content .memberSpMallMoney").css("display","none"),a(".nav-content .memberLbMallMoney").css("display","inline")):"B"==b?(a(".nav-content .memberSpOrderMoney").css("display","none"),a(".nav-content .memberLbOrderMoney").css("display","inline")):"C"==b?(a(".work_user-money .memberSpMallMoney").css("display","none"),a(".work_user-money .memberLbMallMoney").css("display","inline")):"D"==b&&(a(".work_user-money .memberSpOrderMoney").css("display","none"),a(".work_user-money .memberLbOrderMoney").css("display","inline"))}function e(b,c){if(void 0!=window.zhuge){var d="匿名用户";userInfo&&"object"==typeof userInfo&&(d=userInfo.UserName);a.extend({name:d},c);window.zhuge.track(b,c)}}function f(a){return document.getElementById(a)}function g(a){f(a).style.display=""}function h(a){f(a).style.display="none"}function i(a){f(a).focus()}function j(a,b){a=a||.1,b=b||6;var c=0,d=0,e=0,f=0,g=0,h=0;document.documentElement&&(c=document.documentElement.scrollLeft||0,d=document.documentElement.scrollTop||0),document.body&&(e=document.body.scrollLeft||0,f=document.body.scrollTop||0);var g=window.scrollX||0,h=window.scrollY||0,i=Math.max(c,Math.max(e,g)),j=Math.max(d,Math.max(f,h)),k=1+a;if(window.scrollTo(Math.floor(i/k),Math.floor(j/k)),i>0||j>0){var l="gotoTop("+a+", "+b+")";window.setTimeout(l,b)}}function k(a,c){if(c&&"object"==typeof c&&c.SystemCert.indexOf("A")<0){var d;switch(c.CertState){case 0:d={title:"请完成企业实名认证后再操作！",desc:'进行商城交易需经过<span class="lightBlue">企业实名认证</span>，您当前尚未进行此认证。',button:{cleanBtn:{visable:!0,text:"取消",OnCancel:function(){}},enterBtn:{text:"去认证",url:"",onConfrim:function(){window.open(b.getUrl("/Users/ValidateInfo/BaseInfo"),"_self")}}}};var e=new o(d);return e.showNoCertDialog(d),l(a);case 1:d={title:"资料审核中，暂时无法操作！",desc:"联系客服0510-66008000了解审核进度。",button:{enterBtn:{text:"关闭",url:"",onConfrim:function(){}}}};var e=new o(d);return e.showNoCertDialog(d),l(a);case 3:d={title:"认证未通过，无法操作！",desc:"您的帐号未通过认证审核，原因："+c.CertNote+"。重新认证通过后才可以操作~",button:{cleanBtn:{visable:!0,text:"取消",OnCancel:function(){}},enterBtn:{text:"重新认证",url:"",onConfrim:function(){window.open(b.getUrl("/Users/ValidateInfo/BaseInfo"),"_self")}}}};var e=new o(d);return e.showNoCertDialog(d),l(a)}}return!0}function l(a){return a.stopPropagation?a.stopPropagation():window.event&&(window.event.cancelBubble=!0),a.preventDefault(),!1}var m={Ajax:function(b,c,d){return a.ajax({url:b,data:c,type:d,dataType:"json",contentType:"application/json; charset=utf-8",async:!1,cache:!1,beforeSend:function(a){},success:function(a){},error:function(){},complete:function(a,b){}}).responseJSON},FillSelect:function(b,c,d){b&&c&&f(b)&&(f(b).length=1,a.each(c,function(c,e){d&&d===e.Value?a("#"+b).append("<option value='"+e.Id+"' selected>"+e.Value+"</option>"):a("#"+b).append("<option value='"+e.Id+"'>"+e.Value+"</option>")}))}},n=function(){function b(){var a=document.createElement("input");return"placeholder"in a}a(function(){b()||a("input[type=text],textarea").each(function(b,c){var d=a(c).attr("placeholder"),e=a(c).val();(d===e||""===e&&void 0!==d)&&(a(c).addClass("f-gray"),a(c).val(d)),a(c).blur(function(){a(c).val()&&a(c).val()!==d||(a(c).addClass("f-gray"),a(c).val(d))}),a(c).focus(function(){a(c).removeClass("f-gray"),a(c).val()===d&&a(c).val("")})})})},o=function(b,c){this.msg=a.extend({title:null,desc:null,htmlTemplate:null,button:{cleanBtn:{visable:!1,text:null,OnCancel:null},enterBtn:{text:"",url:"",onConfrim:null},extendBtn:{visable:!1,text:"",url:"",OnExtendClick:null}}},b),this.certDialog=null};return o.prototype={showNoCertDialog:function(){var b=this;b.certDialog=a.dialog({lock:!0,max:!1,min:!1,fixed:!0,resize:!1,drag:!0,close:!0}),b.certDialog.hide(),b.certDialog.title("");var c="";c+='<div class="ui-member-dialog width500">',c+='<div class="title"><h3>'+b.msg.title+"</h3></div>",c+='<div class="msg">'+b.msg.desc+"</div>",null!=b.msg.htmlTemplate&&(c+=b.msg.htmlTemplate),c+='<div class="btns">',void 0!=b.msg.button.cleanBtn&&b.msg.button.cleanBtn.visable&&(c+="<a class='hideCertDialog' href=\"javascript:;\" >"+b.msg.button.cleanBtn.text+"</a>"),c+='<a  class="confirmCertdialog ',void 0!=b.msg.button.extendBtn?b.msg.button.extendBtn.visable||(c+="normal-blue-button"):c+="normal-blue-button",null!=b.msg.button.enterBtn.url&&(c+='" href="'+b.msg.button.enterBtn.url+'"'),c+='">'+b.msg.button.enterBtn.text+"</a>",void 0!=b.msg.button.extendBtn&&b.msg.button.extendBtn.visable&&(c+="<a class='extendCertDialog normal-blue-button' href=\"javascript:;\" >"+b.msg.button.extendBtn.text+"</a>"),c+="</div>",c+="</div>",b.certDialog.content(c);var d=a(".ui-member-dialog");b._bindEvents(d),b.certDialog.show()},_bindEvents:function(a){var b=this,c=a.find(".hideCertDialog");c.click(function(){return"function"==typeof b.msg.button.cleanBtn.OnCancel&&b.msg.button.cleanBtn.OnCancel(this),b.certDialog.close(),!1});var d=a.find(".confirmCertdialog");d.click(function(){return"function"==typeof b.msg.button.enterBtn.onConfrim&&b.msg.button.enterBtn.onConfrim(this),b.certDialog.close(),!1});var e=a.find(".extendCertDialog");e.click(function(){return"function"==typeof b.msg.button.extendBtn.OnExtendClick&&b.msg.button.extendBtn.OnExtendClick(this),b.certDialog.close(),!1})}},{showMoney:c,hideMoney:d,PlaceHolder:n,WriteAnalyze:e,Utils:m,gotoTop:j,checkCert:k,CustDialog:o,Dd:f,Ds:g,Dh:h,Df:i}});